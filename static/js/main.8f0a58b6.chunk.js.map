{"version":3,"sources":["App.js","index.js"],"names":["urlPattern","elementsToRemove","goodElements","initialUrl","potentialUrl","window","location","pathname","slice","App","useState","url","setUrl","html","setHtml","errorMessage","setErrorMessage","showCorsLink","setShowCorsLink","title","setTitle","inputError","setInputError","parseHtml","data","toLowerCase","indexOf","doc","DOMParser","parseFromString","body","forEach","tag","Array","from","getElementsByTagName","e","remove","removeAttribute","includes","tagName","origin","URL","trim","setAttribute","href","getAttribute","startsWith","newHtml","getElementById","innerHTML","a","axios","get","errorResponse","message","response","status","statusText","console","log","onSubmit","preventDefault","read","type","placeholder","value","onChange","target","test","className","disabled","length","id","rel","dangerouslySetInnerHTML","__html","ReactDOM","render","StrictMode","document"],"mappings":"4NAGMA,EAAa,8FACbC,EAAmB,CACvB,SACA,QACA,OACA,QACA,MACA,MACA,QACA,QACA,QACA,SACA,SACA,QACA,UACA,SACA,SACA,WACA,SACA,WACA,WACA,OACA,QACA,QACA,SACA,QACA,WACA,SACA,SACA,WACA,SACA,WACA,OACA,SACA,UACA,SAEIC,EAAe,CACnB,UACA,UACA,QACA,SACA,SACA,KACA,KACA,KACA,KACA,KACA,KACA,SACA,OACA,MACA,UACA,aACA,KACA,MACA,KACA,KACA,aACA,SACA,KACA,KACA,KACA,IACA,MACA,KACA,IACA,OACA,IACA,MACA,MACA,KACA,OACA,OACA,OACA,MACA,KACA,IACA,MACA,OACA,IACA,IACA,OACA,QACA,OACA,SACA,MACA,MACA,OACA,IACA,MACA,MACA,MACA,MACA,UACA,MACA,WACA,QACA,QACA,KACA,QACA,KACA,QACA,KACA,UACA,SACA,UACA,OACA,YAGEC,EAAa,GACXC,EAAeC,OAAOC,SAASC,SAASC,MAAM,GAKrC,SAASC,IAAO,IAAD,EACNC,mBAASP,GADH,mBACrBQ,EADqB,KAChBC,EADgB,OAEJF,mBAAS,MAFL,mBAErBG,EAFqB,KAEfC,EAFe,OAGYJ,mBAAS,MAHrB,mBAGrBK,EAHqB,KAGPC,EAHO,OAIYN,oBAAS,GAJrB,mBAIrBO,EAJqB,KAIPC,EAJO,OAKFR,mBAAS,IALP,mBAKrBS,EALqB,KAKdC,EALc,OAMQV,oBAAS,GANjB,mBAMrBW,EANqB,KAMTC,EANS,KAW5B,SAASC,EAAUC,GACjB,GACkB,kBAATA,IACsC,IAA7CA,EAAKC,cAAcC,QAAQ,aAI3B,OAFAN,EAAS,6CACTJ,EAAgB,wCAGlB,IAAMW,GAAM,IAAIC,WAAYC,gBAAgBL,EAAM,aAClDJ,EAASO,EAAIR,OAVU,IAWfW,EAASH,EAATG,KACR7B,EAAiB8B,SAAQ,SAACC,GACxBC,MAAMC,KAAKJ,EAAKK,qBAAqBH,IAAMD,SAAQ,SAACK,GAAD,OAAOA,EAAEC,eAE9DJ,MAAMC,KAAKJ,EAAKK,qBAAqB,MAAMJ,SAAQ,SAACK,GAClDA,EAAEE,gBAAgB,SACbpC,EAAaqC,SAASH,EAAEI,QAAQf,gBAAgBW,EAAEC,YAjBlC,IAmBfI,EAAW,IAAIC,IAAI/B,EAAIgC,QAAvBF,OACRR,MAAMC,KAAKJ,EAAKK,qBAAqB,MAAMJ,SAAQ,SAACK,GAClDA,EAAEQ,aAAa,SAAU,UACzBR,EAAEQ,aAAa,MAAO,cACtB,IAAMC,EAAOT,EAAEU,aAAa,QACxBD,GAAQA,EAAKE,WAAW,MAC1BX,EAAEQ,aAAa,OAAf,UAA0BH,GAA1B,OAAmCI,OAGvC,IACIG,EADYrB,EAAIsB,eAAe,YACVnB,EACzB,GAAIN,EAAKe,SAAS,YAAa,CAAC,IAAD,EACjBT,EAAKK,qBAAqB,WAArCa,EAD4B,oBAG/BlC,EAAQkC,EAAQE,WA5CU,4CA8C5B,gCAAAC,EAAA,6DACE/B,EAAS,eACTF,GAAgB,GAChBF,EAAgB,MAChBF,EAAQ,MAJV,kBAM2BsC,IAAMC,IAAI1C,EAAIgC,QANzC,gBAOIpB,EAPJ,EAMYC,MANZ,6EAU6B4B,IAAMC,IAAN,8CACkB1C,EAAIgC,SAXnD,iBAaMpB,EAbN,EAUcC,MAVd,mDAeY8B,EAAgB,CAAEC,QAAS,KAAMA,SACnC,KAAMC,WACRF,EAAcG,OAAS,KAAMD,SAASC,OACtCH,EAAcI,WAAa,KAAMF,SAASE,WAC1CJ,EAAc9B,KAAO,KAAMgC,SAAShC,MAGtCmC,QAAQC,IAAIN,GACZlC,EAAS,yDACTJ,EAAgB,oCAChBE,GAAgB,GAzBtB,mEA9C4B,sBAoF5B,OACE,qCACE,uBAAM2C,SAXV,SAAsBzB,GACpBA,EAAE0B,iBACEnD,EACGU,GA9EmB,mCA8EP0C,GAEjBzC,GAAc,IAMd,UACE,uBACE0C,KAAK,OACLC,YAAY,cACZC,MAAOvD,EACPwD,SApFR,YAA8C,IAAZD,EAAW,EAArBE,OAAUF,MAChCtD,EAAOsD,GACP5C,GAAetB,EAAWqE,KAAKH,KAmFzBI,UAAWjD,EAAa,QAAU,KAEpC,wBAAQ2C,KAAK,SAASO,SAAUlD,EAAhC,qBAIDF,EAAMqD,OAAS,GAAK,oBAAIC,GAAG,QAAP,SAAgBtD,IACpCJ,GAAgB,4BAAIA,IACpBE,GACC,8BACE,gDACA,mBACE4B,KAAK,+CACLuB,OAAO,SACPM,IAAI,aAHN,4FAQA,uDAIJ,yBAASC,wBAhCe,CAAEC,OAAQ/D,QAvFpCT,GAAgBJ,EAAWqE,KAAKjE,KAClCD,EAAaC,GChHfyE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACtE,EAAD,MAEFuE,SAAS/B,eAAe,W","file":"static/js/main.8f0a58b6.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst urlPattern = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;\nconst elementsToRemove = [\n  \"script\",\n  \"style\",\n  \"area\",\n  \"audio\",\n  \"img\",\n  \"map\",\n  \"track\",\n  \"video\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"param\",\n  \"picture\",\n  \"source\",\n  \"canvas\",\n  \"noscript\",\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  \"menu\",\n  \"applet\",\n  \"bgsound\",\n  \"image\",\n];\nconst goodElements = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"hgroup\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n  \"del\",\n  \"ins\",\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  \"details\",\n  \"dialog\",\n  \"summary\",\n  \"slot\",\n  \"template\",\n];\n\nlet initialUrl = \"\";\nconst potentialUrl = window.location.pathname.slice(6);\nif (potentialUrl && urlPattern.test(potentialUrl)) {\n  initialUrl = potentialUrl;\n}\n\nexport default function App() {\n  const [url, setUrl] = useState(initialUrl);\n  const [html, setHtml] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [showCorsLink, setShowCorsLink] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  function handleChange({ target: { value } }) {\n    setUrl(value);\n    setInputError(!urlPattern.test(value));\n  }\n  function parseHtml(data) {\n    if (\n      typeof data !== \"string\" &&\n      data.toLowerCase().indexOf(\"<!doctype\") === -1\n    ) {\n      setTitle(\"Error: Sorry, wrong type of webpage.\");\n      setErrorMessage(\"Please enter a URL for an HTML page.\");\n      return;\n    }\n    const doc = new DOMParser().parseFromString(data, \"text/html\");\n    setTitle(doc.title);\n    const { body } = doc;\n    elementsToRemove.forEach((tag) => {\n      Array.from(body.getElementsByTagName(tag)).forEach((e) => e.remove());\n    });\n    Array.from(body.getElementsByTagName(\"*\")).forEach((e) => {\n      e.removeAttribute(\"style\");\n      if (!goodElements.includes(e.tagName.toLowerCase())) e.remove();\n    });\n    const { origin } = new URL(url.trim());\n    Array.from(body.getElementsByTagName(\"a\")).forEach((e) => {\n      e.setAttribute(\"target\", \"_blank\");\n      e.setAttribute(\"rel\", \"noreferrer\");\n      const href = e.getAttribute(\"href\");\n      if (href && href.startsWith(\"/\")) {\n        e.setAttribute(\"href\", `${origin}${href}`);\n      }\n    });\n    const content = doc.getElementById(\"content\");\n    let newHtml = content || body;\n    if (data.includes(\"<article\")) {\n      [newHtml] = body.getElementsByTagName(\"article\");\n    }\n    setHtml(newHtml.innerHTML);\n  }\n  async function read() {\n    setTitle(\"Loading ...\");\n    setShowCorsLink(false);\n    setErrorMessage(null);\n    setHtml(null);\n    try {\n      const { data } = await axios.get(url.trim());\n      parseHtml(data);\n    } catch {\n      try {\n        const { data } = await axios.get(\n          `https://cors-anywhere.herokuapp.com/${url.trim()}`\n        );\n        parseHtml(data);\n      } catch (error) {\n        const errorResponse = { message: error.message };\n        if (error.response) {\n          errorResponse.status = error.response.status;\n          errorResponse.statusText = error.response.statusText;\n          errorResponse.data = error.response.data;\n        }\n        // eslint-disable-next-line no-console\n        console.log(errorResponse);\n        setTitle(\"Uh oh. Bummer. Can't get the text from that web page.\");\n        setErrorMessage(\"Are you sure the URL is correct?\");\n        setShowCorsLink(true);\n      }\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (url) {\n      if (!inputError) read();\n    } else {\n      setInputError(true);\n    }\n  }\n  const createMarkup = () => ({ __html: html });\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Enter a URL\"\n          value={url}\n          onChange={handleChange}\n          className={inputError ? \"error\" : \"\"}\n        />\n        <button type=\"submit\" disabled={inputError}>\n          READ\n        </button>\n      </form>\n      {title.length > 0 && <h1 id=\"title\">{title}</h1>}\n      {errorMessage && <p>{errorMessage}</p>}\n      {showCorsLink && (\n        <p>\n          <span>If so, then </span>\n          <a\n            href=\"https://cors-anywhere.herokuapp.com/corsdemo\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            go here and click the button to &quot;Request temporary access to\n            the demo server&quot;.\n          </a>\n          <span> Then try again!</span>\n        </p>\n      )}\n      {/* eslint-disable-next-line react/no-danger */}\n      <article dangerouslySetInnerHTML={createMarkup()} />\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}