{"version":3,"sources":["App.js","index.js"],"names":["urlPattern","App","useState","url","setUrl","text","setText","title","setTitle","inputError","setInputError","parseHtml","data","toLowerCase","indexOf","doc","DOMParser","parseFromString","body","Array","from","getElementsByTagName","forEach","se","remove","html","includes","innerText","a","axios","get","trim","errorResponse","message","response","status","statusText","console","log","onSubmit","e","preventDefault","read","type","placeholder","value","onChange","target","test","className","disabled","id","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4NAGMA,EAAa,8FAEJ,SAASC,IAAO,IAAD,EACNC,mBAAS,IADH,mBACrBC,EADqB,KAChBC,EADgB,OAEJF,mBAAS,IAFL,mBAErBG,EAFqB,KAEfC,EAFe,OAGFJ,mBAAS,IAHP,mBAGrBK,EAHqB,KAGdC,EAHc,OAIQN,oBAAS,GAJjB,mBAIrBO,EAJqB,KAITC,EAJS,KAS5B,SAASC,EAAUC,GACjB,GACkB,kBAATA,IACsC,IAA7CA,EAAKC,cAAcC,QAAQ,aAI3B,OAFAN,EAAS,6CACTF,EAAQ,wCAGV,IAAMS,GAAM,IAAIC,WAAYC,gBAAgBL,EAAM,aAClDJ,EAASO,EAAIR,OAVU,IAWfW,EAASH,EAATG,KACRC,MAAMC,KAAKF,EAAKG,qBAAqB,WAAWC,SAAQ,SAACC,GACvDA,EAAGC,YAELL,MAAMC,KAAKF,EAAKG,qBAAqB,UAAUC,SAAQ,SAACC,GACtDA,EAAGC,YAEL,IAAIC,EAAOP,EACX,GAAIN,EAAKc,SAAS,YAAa,CAAC,IAAD,EACpBR,EAAKG,qBAAqB,WAAlCI,EAD4B,oBAG/BnB,EAAQmB,EAAKE,WA/Ba,4CAiC5B,gCAAAC,EAAA,6DACEpB,EAAS,eACTF,EAAQ,IAFV,kBAI2BuB,IAAMC,IAAI3B,EAAI4B,QAJzC,gBAKIpB,EALJ,EAIYC,MAJZ,6EAQ6BiB,IAAMC,IAAN,8CACkB3B,EAAI4B,SATnD,iBAWMpB,EAXN,EAQcC,MARd,mDAaYoB,EAAgB,CAAEC,QAAS,KAAMA,SACnC,KAAMC,WACRF,EAAcG,OAAS,KAAMD,SAASC,OACtCH,EAAcI,WAAa,KAAMF,SAASE,WAC1CJ,EAAcpB,KAAO,KAAMsB,SAAStB,MAGtCyB,QAAQC,IAAIN,GACZxB,EAAS,yDACTF,EAAQ,oCAtBd,mEAjC4B,sBA+D5B,OACE,qCACE,uBAAMiC,SANV,SAAsBC,GACpBA,EAAEC,iBACGhC,GA7DqB,mCA6DTiC,IAIf,UACE,uBACEC,KAAK,OACLC,YAAY,cACZC,MAAO1C,EACP2C,SAjER,YAA8C,IAAZD,EAAW,EAArBE,OAAUF,MAChCzC,EAAOyC,GACPnC,GAAeV,EAAWgD,KAAKH,KAgEzBI,UAAWxC,EAAa,QAAU,KAEpC,wBAAQkC,KAAK,SAASO,SAAUzC,EAAhC,qBAIF,0BAAS0C,GAAG,OAAZ,UACE,oBAAIA,GAAG,QAAP,SAAgB5C,IAChB,mBAAG4C,GAAG,OAAN,SAAc9C,UC/EtB+C,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACrD,EAAD,MAEFsD,SAASC,eAAe,W","file":"static/js/main.15239f0c.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst urlPattern = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;\n\nexport default function App() {\n  const [url, setUrl] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  function handleChange({ target: { value } }) {\n    setUrl(value);\n    setInputError(!urlPattern.test(value));\n  }\n  function parseHtml(data) {\n    if (\n      typeof data !== \"string\" &&\n      data.toLowerCase().indexOf(\"<!doctype\") === -1\n    ) {\n      setTitle(\"Error: Sorry, wrong type of webpage.\");\n      setText(\"Please enter a URL for an HTML page.\");\n      return;\n    }\n    const doc = new DOMParser().parseFromString(data, \"text/html\");\n    setTitle(doc.title);\n    const { body } = doc;\n    Array.from(body.getElementsByTagName(\"script\")).forEach((se) => {\n      se.remove();\n    });\n    Array.from(body.getElementsByTagName(\"style\")).forEach((se) => {\n      se.remove();\n    });\n    let html = body;\n    if (data.includes(\"<article\")) {\n      [html] = body.getElementsByTagName(\"article\");\n    }\n    setText(html.innerText);\n  }\n  async function read() {\n    setTitle(\"Loading ...\");\n    setText(\"\");\n    try {\n      const { data } = await axios.get(url.trim());\n      parseHtml(data);\n    } catch {\n      try {\n        const { data } = await axios.get(\n          `https://cors-anywhere.herokuapp.com/${url.trim()}`\n        );\n        parseHtml(data);\n      } catch (error) {\n        const errorResponse = { message: error.message };\n        if (error.response) {\n          errorResponse.status = error.response.status;\n          errorResponse.statusText = error.response.statusText;\n          errorResponse.data = error.response.data;\n        }\n        // eslint-disable-next-line no-console\n        console.log(errorResponse);\n        setTitle(\"Uh oh. Bummer. Can't get the text from that web page.\");\n        setText(\"Are you sure the URL is correct?\");\n      }\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (!inputError) read();\n  }\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Enter a URL\"\n          value={url}\n          onChange={handleChange}\n          className={inputError ? \"error\" : \"\"}\n        />\n        <button type=\"submit\" disabled={inputError}>\n          READ\n        </button>\n      </form>\n      <article id=\"read\">\n        <h1 id=\"title\">{title}</h1>\n        <p id=\"text\">{text}</p>\n      </article>\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}